o<orientspindle> sub

; First ensure spindle is stopped
M5

; Orient the spindle
M19 R0 ; Orient spindle to 0 degrees

; Wait for orientation to complete
M66 P6 L3 Q3 ; Wait up to 3 seconds for spindle orientation
o100 if [#5399 EQ 0]
    (msg, Spindle orientation failed)
    (debug, Spindle orientation failed)
    o<orientspindle> return [0]
o100 endif

(msg, Spindle orientation complete)
o<orientspindle> endsub [1]

M2